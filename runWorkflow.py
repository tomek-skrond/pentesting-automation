from executeCommand import executeCommand
from openYaml import openYaml

def validateWorkflow(path):
    output = executeCommand(f'ls {path}')
    
    if ('.yml' or '.yaml') in output:
        print('VALID workflow structure detected')
        return True
    else:
        print('INVALID workflow structure')
        return False



def runWorkflow(path):
    print(path)
    config_file = executeCommand(f"ls {path} | grep -E '*.yml|*.yaml'")
    config_file = config_file.strip()
    
    if validateWorkflow(path):
        print(f'Running workflow {path}')
        workflow_config = openYaml(f'{path}{config_file}')

        print(workflow_config)
    else:
        exit()