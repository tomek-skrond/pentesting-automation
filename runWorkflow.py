from executeCommand import executeCommand
from openYaml import openYaml
from commandParser import parse_commands

def validateWorkflow(path):
    output = executeCommand(f'ls {path}')
    
    if ('.yml' or '.yaml') in output:
        print('VALID workflow structure detected\n')
        return True
    else:
        print('INVALID workflow structure\n')
        return False



def runWorkflow(path):
    print("\n")
    config_file = executeCommand(f"ls {path} | grep -E '*.yml|*.yaml'")
    config_file = config_file.strip()
    
    if validateWorkflow(path):
        print(f'Running workflow {path}\n\n')
        workflow_config = openYaml(f'{path}{config_file}')

        parse_commands(workflow_config)
    else:
        exit()